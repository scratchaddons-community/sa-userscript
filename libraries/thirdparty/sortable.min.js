var t,n
t=this,n=function(){function t(t,n){var e,i=Object.keys(t)
return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(t),n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),i.push.apply(i,e)),i}function n(n){for(var e=1;arguments.length>e;e++){var i=null!=arguments[e]?arguments[e]:{}
e%2?t(Object(i),1).forEach((function(t){var e,o
t=i[o=t],o in(e=n)?Object.defineProperty(e,o,{value:t,enumerable:1,configurable:1,writable:1}):e[o]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))}))}return n}function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){return(i=Object.assign||function(t){for(var n=1;arguments.length>n;n++){var e,i=arguments[n]
for(e in i)({}).hasOwnProperty.call(i,e)&&(t[e]=i[e])}return t}).apply(this,arguments)}function o(t,n){if(null==t)return{}
var e,i=function(t,n){if(null==t)return{}
for(var e,i={},o=Object.keys(t),r=0;o.length>r;r++)n.indexOf(e=o[r])>=0||(i[e]=t[e])
return i}(t,n)
if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(t),r=0;o.length>r;r++)n.indexOf(e=o[r])>=0||{}.propertyIsEnumerable.call(t,e)&&(i[e]=t[e])
return i}function r(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return a(t,n)
var e={}.toString.call(t).slice(8,-1)
return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,n){(null==n||n>t.length)&&(n=t.length)
for(var e=0,i=new Array(n);n>e;e++)i[e]=t[e]
return i}function s(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}function u(t,n,e){t.addEventListener(n,e,!wt&&Tt)}function l(t,n,e){t.removeEventListener(n,e,!wt&&Tt)}function c(t,n){if(n&&(">"===n[0]&&(n=n.substring(1)),t))try{if(t.matches)return t.matches(n)
if(t.msMatchesSelector)return t.msMatchesSelector(n)
if(t.webkitMatchesSelector)return t.webkitMatchesSelector(n)}catch(t){return}}function h(t,n,e,i){if(t){e=e||document
do{if(null!=n&&(">"!==n[0]||t.parentNode===e)&&c(t,n)||i&&t===e)return t}while(t!==e&&(t=(o=t).host&&o!==document&&o.host.nodeType?o.host:o.parentNode))}var o
return null}function f(t,n,e){var i
t&&n&&(t.classList?t.classList[e?"add":"remove"](n):(i=(" "+t.className+" ").replace(xt," ").replace(" "+n+" "," "),t.className=(i+(e?" "+n:"")).replace(xt," ")))}function d(t,n,e){var i=t&&t.style
if(i){if(void 0===e)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(e=t.currentStyle),void 0===n?e:e[n]
i[n=n in i||-1!==n.indexOf("webkit")?n:"-webkit-"+n]=e+("string"==typeof e?"":"px")}}function v(t,n){var e=""
if("string"==typeof t)e=t
else do{var i=d(t,"transform")}while(i&&"none"!==i&&(e=i+" "+e),!n&&(t=t.parentNode))
var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix
return o&&new o(e)}function m(t,n,e){if(t){var i=t.getElementsByTagName(n),o=0,r=i.length
if(e)for(;r>o;o++)e(i[o],o)
return i}return[]}function p(){return document.scrollingElement||document.documentElement}function g(t,n,e,i,o){if(t.getBoundingClientRect||t===window){var r,a,s,u,l,c,h=t!==window&&t.parentNode&&t!==p()?(a=(r=t.getBoundingClientRect()).top,s=r.left,u=r.bottom,l=r.right,c=r.height,r.width):(s=a=0,u=window.innerHeight,l=window.innerWidth,c=window.innerHeight,window.innerWidth)
if((n||e)&&t!==window&&(o=o||t.parentNode,!wt))do{if(o&&o.getBoundingClientRect&&("none"!==d(o,"transform")||e&&"static"!==d(o,"position"))){var f=o.getBoundingClientRect()
a-=f.top+parseInt(d(o,"border-top-width")),s-=f.left+parseInt(d(o,"border-left-width")),u=a+r.height,l=s+r.width
break}}while(o=o.parentNode)
return i&&t!==window&&(i=(n=v(o||t))&&n.a,t=n&&n.d,n&&(u=(a/=t)+(c/=t),l=(s/=i)+(h/=i))),{top:a,left:s,bottom:u,right:l,width:h,height:c}}}function b(t,n,e){for(var i=I(t,1),o=g(t)[n];i;){var r=g(i)[e]
if(!("top"===e||"left"===e?o>=r:r>=o))return i
if(i===p())break
i=I(i,0)}return 0}function w(t,n,e,i){for(var o=0,r=0,a=t.children;a.length>r;){if("none"!==a[r].style.display&&a[r]!==z.ghost&&(i||a[r]!==z.dragged)&&h(a[r],e.draggable,t,0)){if(o===n)return a[r]
o++}r++}return null}function y(t,n){for(var e=t.lastElementChild;e&&(e===z.ghost||"none"===d(e,"display")||n&&!c(e,n));)e=e.previousElementSibling
return e||null}function E(t,n){var e=0
if(!t||!t.parentNode)return-1
for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===z.clone||n&&!c(t,n)||e++
return e}function S(t){var n=0,e=0,i=p()
if(t)do{var o=(r=v(t)).a,r=r.d}while(n+=t.scrollLeft*o,e+=t.scrollTop*r,t!==i&&(t=t.parentNode))
return[n,e]}function I(t,n){if(!t||!t.getBoundingClientRect)return p()
var e=t,i=0
do{if(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight){var o=d(e)
if(e.scrollWidth>e.clientWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||e.scrollHeight>e.clientHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!e.getBoundingClientRect||e===document.body)return p()
if(i||n)return e
i=1}}}while(e=e.parentNode)
return p()}function O(t,n){return Math.round(t.top)===Math.round(n.top)&&Math.round(t.left)===Math.round(n.left)&&Math.round(t.height)===Math.round(n.height)&&Math.round(t.width)===Math.round(n.width)}function T(t,n){return function(){var e
X||(1===(e=arguments).length?t.call(this,e[0]):t.apply(this,e),X=setTimeout((function(){X=void 0}),n))}}function x(t,n,e){t.scrollLeft+=n,t.scrollTop+=e}function M(t){var n=window.Polymer,e=window.jQuery||window.Zepto
return n&&n.dom?n.dom(t).cloneNode(1):e?e(t).clone(1)[0]:t.cloneNode(1)}function D(t,n){d(t,"position","absolute"),d(t,"top",n.top),d(t,"left",n.left),d(t,"width",n.width),d(t,"height",n.height)}function C(t){d(t,"position",""),d(t,"top",""),d(t,"left",""),d(t,"width",""),d(t,"height","")}function _(t){var e=t.sortable,i=t.rootEl,o=t.name,r=t.targetEl,a=t.cloneEl,s=t.toEl,u=t.fromEl,l=t.oldIndex,c=t.newIndex,h=t.oldDraggableIndex,f=t.newDraggableIndex,d=t.originalEvent,v=t.putSortable,m=t.extraEventProperties
if(e=e||i&&i[Mt]){var p,g=e.options
t="on"+o.charAt(0).toUpperCase()+o.substr(1),!window.CustomEvent||wt||yt?(p=document.createEvent("Event")).initEvent(o,1,1):p=new CustomEvent(o,{bubbles:1,cancelable:1}),p.to=s||i,p.from=u||i,p.item=r||i,p.clone=a,p.oldIndex=l,p.newIndex=c,p.oldDraggableIndex=h,p.newDraggableIndex=f,p.originalEvent=d,p.pullMode=v?v.lastPutMode:void 0
var b,w=n(n({},m),_t.getEventProperties(o,e))
for(b in w)p[b]=w[b]
i&&i.dispatchEvent(p),g[t]&&g[t].call(e,p)}}function k(t,e,i){var r=(a=arguments.length>2&&void 0!==i?i:{}).evt,a=o(a,kt)
_t.pluginEvent.bind(z)(t,e,n({dragEl:Y,parentEl:Z,ghostEl:q,rootEl:$,nextEl:J,lastDownEl:Q,cloneEl:tt,cloneHidden:nt,dragStarted:vt,putSortable:st,activeSortable:z.active,originalEvent:r,oldIndex:et,oldDraggableIndex:ot,newIndex:it,newDraggableIndex:rt,hideGhostForTarget:Xt,unhideGhostForTarget:Yt,cloneNowHidden(){nt=1},cloneNowShown(){nt=0},dispatchSortableEvent(t){A({sortable:e,name:t,originalEvent:r})}},a))}function A(t){_(n({putSortable:st,cloneEl:tt,targetEl:Y,rootEl:$,oldIndex:et,oldDraggableIndex:ot,newIndex:it,newDraggableIndex:rt},t))}function j(t){if(Y){var n=(o=(t=t.touches?t.touches[0]:t).clientX,r=t.clientY,Nt.some((function(t){if((i=t[Mt].options.emptyInsertThreshold)&&!y(t)){var n=g(t),e=o>=n.left-i&&n.right+i>=o,i=r>=n.top-i&&n.bottom+i>=r
return e&&i?a=t:void 0}})),a)
if(n){var e,i={}
for(e in t)t.hasOwnProperty(e)&&(i[e]=t[e])
i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[Mt]._onDragOver(i)}}var o,r,a}function N(t){Y&&Y.parentNode[Mt]._isOutsideThisEl(t.target)}function z(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t))
this.el=t,this.options=e=i({},e),t[Mt]=this
var o,r,a={group:null,sort:1,disabled:0,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:0,invertedSwapThreshold:null,removeCloneOnHide:1,direction(){return Vt(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:1,animation:0,easing:null,setData(t,n){t.setData("Text",n.textContent)},dropBubble:0,dragoverBubble:0,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:0,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:0,fallbackClass:"sortable-fallback",fallbackOnBody:0,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:0!=z.supportPointer&&"PointerEvent"in window&&!St,emptyInsertThreshold:5}
for(o in _t.initializePlugins(this,t,a),a)o in e||(e[o]=a[o])
for(r in Wt(e),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this))
this.nativeDraggable=!e.forceFallback&&Ut,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?u(t,"pointerdown",this._onTapStart):(u(t,"mousedown",this._onTapStart),u(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(u(t,"dragover",this),u(t,"dragenter",this)),Nt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),i(this,function(){var t,e=[]
return{captureAnimationState(){e=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(t){var i,o
"none"!==d(t,"display")&&t!==z.ghost&&(e.push({target:t,rect:g(t)}),i=n({},e[e.length-1].rect),!t.thisAnimationDuration||(o=v(t,1))&&(i.top-=o.f,i.left-=o.e),t.fromRect=i)}))},addAnimationState(t){e.push(t)},removeAnimationState(t){e.splice(function(t,n){for(var e in t)if(t.hasOwnProperty(e))for(var i in n)if(n.hasOwnProperty(i)&&n[i]===t[e][i])return Number(e)
return-1}(e,{target:t}),1)},animateAll(n){var i=this
if(!this.options.animation)return clearTimeout(t),void("function"==typeof n&&n())
var o=0,r=0
e.forEach((function(t){var n=0,e=t.target,a=e.fromRect,s=g(e),u=e.prevFromRect,l=e.prevToRect,c=t.rect,h=v(e,1)
h&&(s.top-=h.f,s.left-=h.e),e.toRect=s,e.thisAnimationDuration&&O(u,s)&&!O(a,s)&&(c.top-s.top)/(c.left-s.left)==(a.top-s.top)/(a.left-s.left)&&(t=c,h=u,u=l,l=i.options,n=Math.sqrt(Math.pow(h.top-t.top,2)+Math.pow(h.left-t.left,2))/Math.sqrt(Math.pow(h.top-u.top,2)+Math.pow(h.left-u.left,2))*l.animation),O(s,a)||(e.prevFromRect=a,e.prevToRect=s,i.animate(e,c,s,n=n||i.options.animation)),n&&(o=1,r=Math.max(r,n),clearTimeout(e.animationResetTimer),e.animationResetTimer=setTimeout((function(){e.animationTime=0,e.prevFromRect=null,e.fromRect=null,e.prevToRect=null,e.thisAnimationDuration=null}),n),e.thisAnimationDuration=n)})),clearTimeout(t),o?t=setTimeout((function(){"function"==typeof n&&n()}),r):"function"==typeof n&&n(),e=[]},animate(t,n,e,i){var o,r
i&&(d(t,"transition",""),d(t,"transform",""),o=(r=v(this.el))&&r.a,r=(n.top-e.top)/((r=r&&r.d)||1),t.animatingX=!!(o=(n.left-e.left)/(o||1)),t.animatingY=!!r,d(t,"transform","translate3d("+o+"px,"+r+"px,0)"),this.forRepaintDummy=t.offsetWidth,d(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),d(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){d(t,"transition",""),d(t,"transform",""),t.animated=0,t.animatingX=0,t.animatingY=0}),i))}}}())}function P(t,n,e,i,o,r,a,s){var u,l=t[Mt],c=l.options.onMove
return!window.CustomEvent||wt||yt?(u=document.createEvent("Event")).initEvent("move",1,1):u=new CustomEvent("move",{bubbles:1,cancelable:1}),u.to=n,u.from=t,u.dragged=e,u.draggedRect=i,u.related=o||n,u.relatedRect=r||g(n),u.willInsertAfter=s,u.originalEvent=a,t.dispatchEvent(u),c?c.call(l,u,a):void 0}function G(t){t.draggable=0}function F(){Ft=0}function B(t){return setTimeout(t,0)}function H(t){return clearTimeout(t)}function K(){en.forEach((function(t){clearInterval(t.pid)})),en=[]}function L(){clearInterval(tn)}function U(){}function R(){}function V(t,n){fn.forEach((function(e,i){(i=n.children[e.sortableIndex+(t?Number(i):0)])?n.insertBefore(e,i):n.appendChild(e)}))}function W(){hn.forEach((function(t){t!==un&&t.parentNode&&t.parentNode.removeChild(t)}))}var X,Y,Z,q,$,J,Q,tt,nt,et,it,ot,rt,at,st,ut,lt,ct,ht,ft,dt,vt,mt,pt,gt,bt,wt=s(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),yt=s(/Edge/i),Et=s(/firefox/i),St=s(/safari/i)&&!s(/chrome/i)&&!s(/android/i),It=s(/iP(ad|od|hone)/i),Ot=s(/chrome/i)&&s(/android/i),Tt={capture:0,passive:0},xt=/\s+/g,Mt="Sortable"+(new Date).getTime(),Dt=[],Ct={initializeByDefault:1},_t={mount(t){for(var n in Ct)!Ct.hasOwnProperty(n)||n in t||(t[n]=Ct[n])
Dt.forEach((function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),Dt.push(t)},pluginEvent(t,e,i){var o=this
this.eventCanceled=0,i.cancel=function(){o.eventCanceled=1}
var r=t+"Global"
Dt.forEach((function(o){e[o.pluginName]&&(e[o.pluginName][r]&&e[o.pluginName][r](n({sortable:e},i)),e.options[o.pluginName]&&e[o.pluginName][t]&&e[o.pluginName][t](n({sortable:e},i)))}))},initializePlugins(t,n,e){for(var o in Dt.forEach((function(o){var r=o.pluginName;(t.options[r]||o.initializeByDefault)&&((o=new o(t,n,t.options)).sortable=t,o.options=t.options,t[r]=o,i(e,o.defaults))})),t.options){var r
t.options.hasOwnProperty(o)&&void 0!==(r=this.modifyOption(t,o,t.options[o]))&&(t.options[o]=r)}},getEventProperties(t,n){var e={}
return Dt.forEach((function(o){"function"==typeof o.eventProperties&&i(e,o.eventProperties.call(n[o.pluginName],t))})),e},modifyOption(t,n,e){var i
return Dt.forEach((function(o){t[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[n]&&(i=o.optionListeners[n].call(t[o.pluginName],e))})),i}},kt=["evt"],At=0,jt=0,Nt=[],zt=0,Pt=0,Gt=[],Ft=0,Bt=[],Ht="undefined"!=typeof document,Kt=It,Lt=yt||wt?"cssFloat":"float",Ut=Ht&&!Ot&&!It&&"draggable"in document.createElement("div"),Rt=function(){if(Ht){if(wt)return 0
var t=document.createElement("x")
return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Vt=function(t,n){var e=d(t),i=parseInt(e.width)-parseInt(e.paddingLeft)-parseInt(e.paddingRight)-parseInt(e.borderLeftWidth)-parseInt(e.borderRightWidth),o=w(t,0,n),r=w(t,1,n),a=o&&d(o),s=r&&d(r),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+g(o).width
return t=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+g(r).width,"flex"===e.display?"column"===e.flexDirection||"column-reverse"===e.flexDirection?"vertical":"horizontal":"grid"===e.display?e.gridTemplateColumns.split(" ").length>1?"horizontal":"vertical":o&&a.float&&"none"!==a.float?(n="left"===a.float?"left":"right",!r||"both"!==s.clear&&s.clear!==n?"horizontal":"vertical"):o&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||u>=i&&"none"===e[Lt]||r&&"none"===e[Lt]&&u+t>i)?"vertical":"horizontal"},Wt=function(t){function n(t,e){return function(i,o,r,a){return null==t&&(e||i.options.group.name&&o.options.group.name&&i.options.group.name===o.options.group.name)?1:null==t||0==t?0:e&&"clone"===t?t:"function"==typeof t?n(t(i,o,r,a),e)(i,o,r,a):(o=(e?i:o).options.group.name,1==t||"string"==typeof t&&t===o||t.join&&t.indexOf(o)>-1)}}var i={},o=t.group
o&&"object"==e(o)||(o={name:o}),i.name=o.name,i.checkPull=n(o.pull,1),i.checkPut=n(o.put),i.revertClone=o.revertClone,t.group=i},Xt=function(){!Rt&&q&&d(q,"display","none")},Yt=function(){!Rt&&q&&d(q,"display","")}
Ht&&!Ot&&document.addEventListener("click",(function(t){if(jt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),jt=0}),1),z.prototype={constructor:z,_isOutsideThisEl(t){this.el.contains(t)||t===this.el||(mt=null)},_getDirection(t,n){return"function"==typeof this.options.direction?this.options.direction.call(this,t,n,Y):this.options.direction},_onTapStart(t){if(t.cancelable){var n=this,e=this.el,i=this.options,o=i.preventOnFilter,r=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(a||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,l=i.filter
if(function(t){Bt.length=0
for(var n=t.getElementsByTagName("input"),e=n.length;e--;){var i=n[e]
i.checked&&Bt.push(i)}}(e),!Y&&!(/mousedown|pointerdown/.test(r)&&0!==t.button||i.disabled)&&!u.isContentEditable&&(this.nativeDraggable||!St||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=h(s,i.draggable,e,0))&&s.animated||Q===s)){if(et=E(s),ot=E(s,i.draggable),"function"==typeof l){if(l.call(this,t,s,this))return A({sortable:n,rootEl:u,name:"filter",targetEl:s,toEl:e,fromEl:e}),k("filter",n,{evt:t}),void(o&&t.cancelable&&t.preventDefault())}else if(l=l&&l.split(",").some((function(i){if(i=h(u,i.trim(),e,0))return A({sortable:n,rootEl:i,name:"filter",targetEl:s,fromEl:e,toEl:e}),k("filter",n,{evt:t}),1})))return void(o&&t.cancelable&&t.preventDefault())
i.handle&&!h(u,i.handle,e,0)||this._prepareDragStart(t,a,s)}}},_prepareDragStart(t,n,e){var i,o=this,r=o.el,a=o.options,s=r.ownerDocument
e&&!Y&&e.parentNode===r&&(i=g(e),$=r,Z=(Y=e).parentNode,J=Y.nextSibling,Q=e,at=a.group,ut={target:z.dragged=Y,clientX:(n||t).clientX,clientY:(n||t).clientY},ft=ut.clientX-i.left,dt=ut.clientY-i.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,Y.style["will-change"]="all",i=function(){k("delayEnded",o,{evt:t}),z.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!Et&&o.nativeDraggable&&(Y.draggable=1),o._triggerDragStart(t,n),A({sortable:o,name:"choose",originalEvent:t}),f(Y,a.chosenClass,1))},a.ignore.split(",").forEach((function(t){m(Y,t.trim(),G)})),u(s,"dragover",j),u(s,"mousemove",j),u(s,"touchmove",j),u(s,"mouseup",o._onDrop),u(s,"touchend",o._onDrop),u(s,"touchcancel",o._onDrop),Et&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Y.draggable=1),k("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!n||this.nativeDraggable&&(yt||wt)?i():z.eventCanceled?this._onDrop():(u(s,"mouseup",o._disableDelayedDrag),u(s,"touchend",o._disableDelayedDrag),u(s,"touchcancel",o._disableDelayedDrag),u(s,"mousemove",o._delayedDragTouchMoveHandler),u(s,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&u(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(i,a.delay)))},_delayedDragTouchMoveHandler(t){t=t.touches?t.touches[0]:t,Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag(){Y&&G(Y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents(){var t=this.el.ownerDocument
l(t,"mouseup",this._disableDelayedDrag),l(t,"touchend",this._disableDelayedDrag),l(t,"touchcancel",this._disableDelayedDrag),l(t,"mousemove",this._delayedDragTouchMoveHandler),l(t,"touchmove",this._delayedDragTouchMoveHandler),l(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart(t,n){n=n||"touch"==t.pointerType&&t,!this.nativeDraggable||n?u(document,this.options.supportPointer?"pointermove":n?"touchmove":"mousemove",this._onTouchMove):(u(Y,"dragend",this),u($,"dragstart",this._onDragStart))
try{document.selection?B((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted(t,n){var e
At=0,$&&Y?(k("dragStarted",this,{evt:n}),this.nativeDraggable&&u(document,"dragover",N),e=this.options,t||f(Y,e.dragClass,0),f(Y,e.ghostClass,1),z.active=this,t&&this._appendGhost(),A({sortable:this,name:"start",originalEvent:n})):this._nulling()},_emulateDragOver(){if(lt){this._lastX=lt.clientX,this._lastY=lt.clientY,Xt()
for(var t=document.elementFromPoint(lt.clientX,lt.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(lt.clientX,lt.clientY))!==n;)n=t
if(Y.parentNode[Mt]._isOutsideThisEl(t),n)do{if(n[Mt]&&n[Mt]._onDragOver({clientX:lt.clientX,clientY:lt.clientY,target:t,rootEl:n})&&!this.options.dragoverBubble)break}while(n=(t=n).parentNode)
Yt()}},_onTouchMove(t){if(ut){var n=(s=this.options).fallbackTolerance,e=s.fallbackOffset,i=t.touches?t.touches[0]:t,o=q&&v(q,1),r=q&&o&&o.a,a=q&&o&&o.d,s=Kt&&bt&&S(bt)
if(r=(i.clientX-ut.clientX+e.x)/(r||1)+(s?s[0]-Gt[0]:0)/(r||1),a=(i.clientY-ut.clientY+e.y)/(a||1)+(s?s[1]-Gt[1]:0)/(a||1),!z.active&&!At){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return
this._onDragStart(t,1)}q&&(o?(o.e+=r-(ct||0),o.f+=a-(ht||0)):o={a:1,b:0,c:0,d:1,e:r,f:a},o="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")"),d(q,"webkitTransform",o),d(q,"mozTransform",o),d(q,"msTransform",o),d(q,"transform",o),ct=r,ht=a,lt=i),t.cancelable&&t.preventDefault()}},_appendGhost(){if(!q){var t=this.options.fallbackOnBody?document.body:$,n=g(Y,1,Kt,1,t),e=this.options
if(Kt){for(bt=t;"static"===d(bt,"position")&&"none"===d(bt,"transform")&&bt!==document;)bt=bt.parentNode
bt!==document.body&&bt!==document.documentElement?(bt===document&&(bt=p()),n.top+=bt.scrollTop,n.left+=bt.scrollLeft):bt=p(),Gt=S(bt)}f(q=Y.cloneNode(1),e.ghostClass,0),f(q,e.fallbackClass,1),f(q,e.dragClass,1),d(q,"transition",""),d(q,"transform",""),d(q,"box-sizing","border-box"),d(q,"margin",0),d(q,"top",n.top),d(q,"left",n.left),d(q,"width",n.width),d(q,"height",n.height),d(q,"opacity","0.8"),d(q,"position",Kt?"absolute":"fixed"),d(q,"zIndex","100000"),d(q,"pointerEvents","none"),z.ghost=q,t.appendChild(q),d(q,"transform-origin",ft/parseInt(q.style.width)*100+"% "+dt/parseInt(q.style.height)*100+"%")}},_onDragStart(t,n){var e=this,i=t.dataTransfer,o=e.options
k("dragStart",this,{evt:t}),z.eventCanceled?this._onDrop():(k("setupClone",this),z.eventCanceled||((tt=M(Y)).removeAttribute("id"),tt.draggable=0,tt.style["will-change"]="",this._hideClone(),f(tt,this.options.chosenClass,0),z.clone=tt),e.cloneId=B((function(){k("clone",e),z.eventCanceled||(e.options.removeCloneOnHide||$.insertBefore(tt,Y),e._hideClone(),A({sortable:e,name:"clone"}))})),n||f(Y,o.dragClass,1),n?(jt=1,e._loopId=setInterval(e._emulateDragOver,50)):(l(document,"mouseup",e._onDrop),l(document,"touchend",e._onDrop),l(document,"touchcancel",e._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(e,i,Y)),u(document,"drop",e),d(Y,"transform","translateZ(0)")),At=1,e._dragStartId=B(e._dragStarted.bind(e,n,t)),u(document,"selectstart",e),vt=1,St&&d(document.body,"user-select","none"))},_onDragOver(t){function e(e,i){k(e,M,n({evt:t,isOwner:I,axis:u?"vertical":"horizontal",revert:s,dragRect:a,targetRect:B,canSort:O,fromSortable:T,target:v,completed:o,onMove:(n,e)=>P($,c,Y,a,n,g(n),t,e),changed:r},i))}function i(){e("dragOverAnimationCapture"),M.captureAnimationState(),M!==T&&T.captureAnimationState()}function o(n){return e("dragOverCompleted",{insertion:n}),n&&(I?S._hideClone():S._showClone(M),M!==T&&(f(Y,(st||S).options.ghostClass,0),f(Y,m.ghostClass,1)),st!==M&&M!==z.active?st=M:M===z.active&&st&&(st=null),T===M&&(M._ignoreWhileAnimating=v),M.animateAll((function(){e("dragOverAnimationComplete"),M._ignoreWhileAnimating=null})),M!==T&&(T.animateAll(),T._ignoreWhileAnimating=null)),(v===Y&&!Y.animated||v===c&&!v.animated)&&(mt=null),m.dragoverBubble||t.rootEl||v===document||(Y.parentNode[Mt]._isOutsideThisEl(t.target),n||j(t)),!m.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),D=1}function r(){it=E(Y),rt=E(Y,m.draggable),A({sortable:M,name:"change",toEl:c,newIndex:it,newDraggableIndex:rt,originalEvent:t})}var a,s,u,l,c=this.el,v=t.target,m=this.options,p=m.group,S=z.active,I=at===p,O=m.sort,T=st||S,M=this,D=0
if(!Ft){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),v=h(v,m.draggable,c,1),e("dragOver"),z.eventCanceled)return D
if(Y.contains(t.target)||v.animated&&v.animatingX&&v.animatingY||M._ignoreWhileAnimating===v)return o(0)
if(jt=0,S&&!m.disabled&&(I?O||(s=Z!==$):st===this||(this.lastPutMode=at.checkPull(this,S,Y,t))&&p.checkPut(this,S,Y,t))){if(u="vertical"===this._getDirection(t,v),a=g(Y),e("dragOverValid"),z.eventCanceled)return D
if(s)return Z=$,i(),this._hideClone(),e("revert"),z.eventCanceled||(J?$.insertBefore(Y,J):$.appendChild(Y)),o(1)
if(!(G=y(c,m.draggable))||function(t,n,e){return e=g(y(e.el,e.options.draggable)),n?t.clientX>e.right+10||e.right>=t.clientX&&t.clientY>e.bottom&&t.clientX>=e.left:t.clientX>e.right&&t.clientY>e.top||e.right>=t.clientX&&t.clientY>e.bottom+10}(t,u,this)&&!G.animated){if(G===Y)return o(0)
if((v=G&&c===t.target?G:v)&&(B=g(v)),0!=P($,c,Y,a,v,B,t,!!v))return i(),G&&G.nextSibling?c.insertBefore(Y,G.nextSibling):c.appendChild(Y),Z=c,r(),o(1)}else if(G&&function(t,n,e){return e=g(w(e.el,0,e.options,1)),n?e.left-10>t.clientX||e.top>t.clientY&&e.right>t.clientX:e.top-10>t.clientY||e.bottom>t.clientY&&e.left>t.clientX}(t,u,this)){if((U=w(c,0,m,1))===Y)return o(0)
if(B=g(v=U),0!=P($,c,Y,a,v,B,t,0))return i(),c.insertBefore(Y,U),Z=c,r(),o(1)}else if(v.parentNode===c){var C,_,N,G,B=g(v),H=Y.parentNode!==c,K=(K=Y.animated&&Y.toRect||a,V=v.animated&&v.toRect||B,L=(l=u)?K.left:K.top,p=l?K.right:K.bottom,G=l?K.width:K.height,U=l?V.left:V.top,K=l?V.right:V.bottom,V=l?V.width:V.height,!(L===U||p===K||L+G/2===U+V/2)),L=u?"top":"left",U=(G=b(v,"top","top")||b(Y,"top","top"))?G.scrollTop:void 0
if(mt!==v&&(_=B[L],zt=0,Pt=!K&&m.invertSwap||H),0!==(C=function(t,n,e,i,o,r,a,s){var u=i?t.clientY:t.clientX,l=i?e.height:e.width
if(t=i?e.top:e.left,i=i?e.bottom:e.right,e=0,!a)if(s&&l*o>gt){if(zt=!zt&&(1===pt?u>t+l*r/2:i-l*r/2>u)?1:zt)e=1
else if(1===pt?t+gt>u:u>i-gt)return-pt}else if(u>t+l*(1-o)/2&&i-l*(1-o)/2>u)return function(t){return E(Y)<E(t)?1:-1}(n)
return(e=e||a)&&(t+l*r/2>u||u>i-l*r/2)?u>t+l/2?1:-1:0}(t,v,B,u,K?1:m.swapThreshold,null==m.invertedSwapThreshold?m.swapThreshold:m.invertedSwapThreshold,Pt,mt===v)))for(var R=E(Y);(N=Z.children[R-=C])&&("none"===d(N,"display")||N===q););if(0===C||N===v)return o(0)
pt=C
var V=(mt=v).nextElementSibling
if(H=0,0!=(K=P($,c,Y,a,v,B,t,H=1===C)))return 1!==K&&-1!==K||(H=1===K),Ft=1,setTimeout(F,30),i(),H&&!V?c.appendChild(Y):v.parentNode.insertBefore(Y,H?V:v),G&&x(G,0,U-G.scrollTop),Z=Y.parentNode,void 0===_||Pt||(gt=Math.abs(_-g(v)[L])),r(),o(1)}if(c.contains(Y))return o(0)}return 0}},_ignoreWhileAnimating:null,_offMoveEvents(){l(document,"mousemove",this._onTouchMove),l(document,"touchmove",this._onTouchMove),l(document,"pointermove",this._onTouchMove),l(document,"dragover",j),l(document,"mousemove",j),l(document,"touchmove",j)},_offUpEvents(){var t=this.el.ownerDocument
l(t,"mouseup",this._onDrop),l(t,"touchend",this._onDrop),l(t,"pointerup",this._onDrop),l(t,"touchcancel",this._onDrop),l(document,"selectstart",this)},_onDrop(t){var n=this.el,e=this.options
it=E(Y),rt=E(Y,e.draggable),k("drop",this,{evt:t}),Z=Y&&Y.parentNode,it=E(Y),rt=E(Y,e.draggable),z.eventCanceled||(zt=Pt=At=0,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),H(this.cloneId),H(this._dragStartId),this.nativeDraggable&&(l(document,"drop",this),l(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),St&&d(document.body,"user-select",""),d(Y,"transform",""),t&&(vt&&(t.cancelable&&t.preventDefault(),e.dropBubble||t.stopPropagation()),q&&q.parentNode&&q.parentNode.removeChild(q),($===Z||st&&"clone"!==st.lastPutMode)&&tt&&tt.parentNode&&tt.parentNode.removeChild(tt),Y&&(this.nativeDraggable&&l(Y,"dragend",this),G(Y),Y.style["will-change"]="",vt&&!At&&f(Y,(st||this).options.ghostClass,0),f(Y,this.options.chosenClass,0),A({sortable:this,name:"unchoose",toEl:Z,newIndex:null,newDraggableIndex:null,originalEvent:t}),$!==Z?(it>=0&&(A({rootEl:Z,name:"add",toEl:Z,fromEl:$,originalEvent:t}),A({sortable:this,name:"remove",toEl:Z,originalEvent:t}),A({rootEl:Z,name:"sort",toEl:Z,fromEl:$,originalEvent:t}),A({sortable:this,name:"sort",toEl:Z,originalEvent:t})),st&&st.save()):it!==et&&it>=0&&(A({sortable:this,name:"update",toEl:Z,originalEvent:t}),A({sortable:this,name:"sort",toEl:Z,originalEvent:t})),z.active&&(null!=it&&-1!==it||(it=et,rt=ot),A({sortable:this,name:"end",toEl:Z,originalEvent:t}),this.save())))),this._nulling()},_nulling(){k("nulling",this),$=Y=Z=q=J=tt=Q=nt=ut=lt=vt=it=rt=et=ot=mt=pt=st=at=z.dragged=z.ghost=z.clone=z.active=null,Bt.forEach((function(t){t.checked=1})),Bt.length=ct=ht=0},handleEvent(t){switch(t.type){case"drop":case"dragend":this._onDrop(t)
break
case"dragenter":case"dragover":Y&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(t))
break
case"selectstart":t.preventDefault()}},toArray(){for(var t,n=[],e=this.el.children,i=0,o=e.length,r=this.options;o>i;i++)h(t=e[i],r.draggable,this.el,0)&&n.push(t.getAttribute(r.dataIdAttr)||function(t){for(var n=t.tagName+t.className+t.src+t.href+t.textContent,e=n.length,i=0;e--;)i+=n.charCodeAt(e)
return i.toString(36)}(t))
return n},sort(t,n){var e={},i=this.el
this.toArray().forEach((function(t,n){h(n=i.children[n],this.options.draggable,i,0)&&(e[t]=n)}),this),n&&this.captureAnimationState(),t.forEach((function(t){e[t]&&(i.removeChild(e[t]),i.appendChild(e[t]))})),n&&this.animateAll()},save(){var t=this.options.store
t&&t.set&&t.set(this)},closest(t,n){return h(t,n||this.options.draggable,this.el,0)},option(t,n){var e=this.options
if(void 0===n)return e[t]
var i=_t.modifyOption(this,t,n)
e[t]=void 0!==i?i:n,"group"===t&&Wt(e)},destroy(){k("destroy",this)
var t=this.el
t[Mt]=null,l(t,"mousedown",this._onTapStart),l(t,"touchstart",this._onTapStart),l(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(l(t,"dragover",this),l(t,"dragenter",this)),[].forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Nt.splice(Nt.indexOf(this.el),1),this.el=t=null},_hideClone(){nt||(k("hideClone",this),z.eventCanceled||(d(tt,"display","none"),this.options.removeCloneOnHide&&tt.parentNode&&tt.parentNode.removeChild(tt),nt=1))},_showClone(t){"clone"===t.lastPutMode?nt&&(k("showClone",this),z.eventCanceled||(Y.parentNode!=$||this.options.group.revertClone?J?$.insertBefore(tt,J):$.appendChild(tt):$.insertBefore(tt,Y),this.options.group.revertClone&&this.animate(Y,tt),d(tt,"display",""),nt=0)):this._hideClone()}},Ht&&u(document,"touchmove",(function(t){(z.active||At)&&t.cancelable&&t.preventDefault()})),z.utils={on:u,off:l,css:d,find:m,is:(t,n)=>!!h(t,n,t,0),extend(t,n){if(t&&n)for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])
return t},throttle:T,closest:h,toggleClass:f,clone:M,index:E,nextTick:B,cancelNextTick:H,detectDirection:Vt,getChild:w},z.get=function(t){return t[Mt]},z.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;t>i;i++)e[i]=arguments[i];(e=e[0].constructor===Array?e[0]:e).forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t))
t.utils&&(z.utils=n(n({},z.utils),t.utils)),_t.mount(t)}))},z.create=function(t,n){return new z(t,n)}
var $t,Zt,qt,Jt,Qt,tn,nn,en=[],on=!(z.version="1.15.0"),rn=T((function(t,n,e,i){if(n.scroll){var o,r=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,s=n.scrollSensitivity,u=n.scrollSpeed,l=p(),c=0
Zt!==e&&(Zt=e,K(),o=n.scrollFn,1==($t=n.scroll)&&($t=I(e,1)))
var h=0,f=$t
do{var v=f,m=(_=g(v)).top,b=_.bottom,w=_.left,y=_.right,E=_.width,S=_.height,O=void 0,T=v.scrollWidth,M=v.scrollHeight,D=d(v),C=v.scrollLeft,_=v.scrollTop,k=v===l?(O=T>E&&("auto"===D.overflowX||"scroll"===D.overflowX||"visible"===D.overflowX),M>S&&("auto"===D.overflowY||"scroll"===D.overflowY||"visible"===D.overflowY)):(O=T>E&&("auto"===D.overflowX||"scroll"===D.overflowX),M>S&&("auto"===D.overflowY||"scroll"===D.overflowY))
if(C=O&&(Math.abs(y-r)<=s&&T>C+E)-(Math.abs(w-r)<=s&&!!C),_=k&&(Math.abs(b-a)<=s&&M>_+S)-(Math.abs(m-a)<=s&&!!_),!en[h])for(var A=0;h>=A;A++)en[A]||(en[A]={})
en[h].vx==C&&en[h].vy==_&&en[h].el===v||(en[h].el=v,en[h].vx=C,en[h].vy=_,clearInterval(en[h].pid),0==C&&0==_||(c=1,en[h].pid=setInterval((function(){i&&0===this.layer&&z.active._onTouchMove(Qt)
var n=en[this.layer].vy?en[this.layer].vy*u:0,e=en[this.layer].vx?en[this.layer].vx*u:0
"function"==typeof o&&"continue"!==o.call(z.dragged.parentNode[Mt],e,n,t,Qt,en[this.layer].el)||x(en[this.layer].el,e,n)}).bind({layer:h}),24))),h++}while(n.bubbleScroll&&f!==l&&(f=I(f,0)))
on=c}}),30)
Ot=function(t){var n=t.originalEvent,e=t.putSortable,i=t.dragEl,o=t.activeSortable,r=t.dispatchSortableEvent,a=t.hideGhostForTarget
t=t.unhideGhostForTarget,n&&(o=e||o,a(),n=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,n=document.elementFromPoint(n.clientX,n.clientY),t(),o&&!o.el.contains(n)&&(r("spill"),this.onSpill({dragEl:i,putSortable:e})))},U.prototype={startIndex:null,dragStart(t){this.startIndex=t=t.oldDraggableIndex},onSpill(t){var n=t.dragEl,e=t.putSortable
this.sortable.captureAnimationState(),e&&e.captureAnimationState(),(t=w(this.sortable.el,this.startIndex,this.options))?this.sortable.el.insertBefore(n,t):this.sortable.el.appendChild(n),this.sortable.animateAll(),e&&e.animateAll()},drop:Ot},i(U,{pluginName:"revertOnSpill"}),R.prototype={onSpill(t){var n=t.dragEl;(t=t.putSortable||this.sortable).captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),t.animateAll()},drop:Ot},i(R,{pluginName:"removeOnSpill"})
var an,sn,un,ln,cn,hn=[],fn=[],dn=0,vn=0,mn=0
return z.mount(new function(){function t(){for(var t in this.defaults={scroll:1,forceAutoScrollFallback:0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:1},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted(t){t=t.originalEvent,this.sortable.nativeDraggable?u(document,"dragover",this._handleAutoScroll):u(document,this.options.supportPointer?"pointermove":t.touches?"touchmove":"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted(t){t=t.originalEvent,this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop(){this.sortable.nativeDraggable?l(document,"dragover",this._handleAutoScroll):(l(document,"pointermove",this._handleFallbackAutoScroll),l(document,"touchmove",this._handleFallbackAutoScroll),l(document,"mousemove",this._handleFallbackAutoScroll)),L(),K(),clearTimeout(X),X=void 0},nulling(){Qt=Zt=$t=on=tn=qt=Jt=null,en.length=0},_handleFallbackAutoScroll(t){this._handleAutoScroll(t,1)},_handleAutoScroll(t,n){var e,i=this,o=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(o,r)
Qt=t,n||this.options.forceAutoScrollFallback||yt||wt||St?(rn(t,this.options,a,n),e=I(a,1),!on||tn&&o===qt&&r===Jt||(tn&&L(),tn=setInterval((function(){var a=I(document.elementFromPoint(o,r),1)
a!==e&&(e=a,K()),rn(t,i.options,a,n)}),10),qt=o,Jt=r)):this.options.bubbleScroll&&I(a,1)!==p()?rn(t,this.options,I(a,0),0):K()}},i(t,{pluginName:"scroll",initializeByDefault:1})}),z.mount(R,U),z.mount(new function(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart(t){nn=t=t.dragEl},dragOverValid(t){var n=t.completed,e=t.target,i=t.onMove,o=t.activeSortable,r=t.changed,a=t.cancel
o.options.swap&&(t=this.sortable.el,o=this.options,e&&e!==t&&(t=nn,nn=0!=i(e)?(f(e,o.swapClass,1),e):null,t&&t!==nn&&f(t,o.swapClass,0)),r(),n(1),a())},drop(t){var n,e,i=t.activeSortable,o=t.putSortable,r=t.dragEl,a=o||this.sortable,s=this.options
nn&&f(nn,s.swapClass,0),nn&&(s.swap||o&&o.options.swap)&&r!==nn&&(a.captureAnimationState(),a!==i&&i.captureAnimationState(),t=(n=r).parentNode,s=(e=nn).parentNode,t&&s&&!t.isEqualNode(e)&&!s.isEqualNode(n)&&(o=E(n),r=E(e),t.isEqualNode(s)&&r>o&&r++,t.insertBefore(e,t.children[o]),s.insertBefore(n,s.children[r])),a.animateAll(),a!==i&&i.animateAll())},nulling(){nn=null}},i(t,{pluginName:"swap",eventProperties:()=>({swapItem:nn})})}),z.mount(new function(){function t(t){for(var n in this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this))
t.options.avoidImplicitDeselect||(t.options.supportPointer?u(document,"pointerup",this._deselectMultiDrag):(u(document,"mouseup",this._deselectMultiDrag),u(document,"touchend",this._deselectMultiDrag))),u(document,"keydown",this._checkKeyDown),u(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:0,setData(n,e){var i=""
hn.length&&sn===t?hn.forEach((function(t,n){i+=(n?", ":"")+t.textContent})):i=e.textContent,n.setData("Text",i)}}}return t.prototype={multiDragKeyDown:0,isMultiDrag:0,delayStartGlobal(t){un=t=t.dragEl},delayEnded(){this.isMultiDrag=~hn.indexOf(un)},setupClone(t){var n=t.sortable
if(t=t.cancel,this.isMultiDrag){for(var e=0;hn.length>e;e++)fn.push(M(hn[e])),fn[e].sortableIndex=hn[e].sortableIndex,fn[e].draggable=0,fn[e].style["will-change"]="",f(fn[e],this.options.selectedClass,0),hn[e]===un&&f(fn[e],this.options.chosenClass,0)
n._hideClone(),t()}},clone(t){var n=t.sortable,e=t.rootEl,i=t.dispatchSortableEvent
t=t.cancel,this.isMultiDrag&&(this.options.removeCloneOnHide||hn.length&&sn===n&&(V(1,e),i("clone"),t()))},showClone(t){var n=t.cloneNowShown,e=t.rootEl
t=t.cancel,this.isMultiDrag&&(V(0,e),fn.forEach((function(t){d(t,"display","")})),n(),cn=0,t())},hideClone(t){var n=this,e=t.cloneNowHidden
t=t.cancel,this.isMultiDrag&&(fn.forEach((function(t){d(t,"display","none"),n.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)})),e(),cn=1,t())},dragStartGlobal(){!this.isMultiDrag&&sn&&sn.multiDrag._deselectMultiDrag(),hn.forEach((function(t){t.sortableIndex=E(t)})),hn=hn.sort((function(t,n){return t.sortableIndex-n.sortableIndex})),mn=1},dragStarted(t){var n,e=this
t=t.sortable,this.isMultiDrag&&(this.options.sort&&(t.captureAnimationState(),this.options.animation&&(hn.forEach((function(t){t!==un&&d(t,"position","absolute")})),n=g(un,0,1,1),hn.forEach((function(t){t!==un&&D(t,n)})),dn=vn=1)),t.animateAll((function(){dn=vn=0,e.options.animation&&hn.forEach((function(t){C(t)})),e.options.sort&&W()})))},dragOver(t){var n=t.target,e=t.completed
t=t.cancel,vn&&~hn.indexOf(n)&&(e(0),t())},revert(t){var n,e,i=t.fromSortable,o=t.rootEl,r=t.sortable,a=t.dragRect
hn.length>1&&(hn.forEach((function(t){r.addAnimationState({target:t,rect:vn?g(t):a}),C(t),t.fromRect=a,i.removeAnimationState(t)})),vn=0,n=!this.options.removeCloneOnHide,e=o,hn.forEach((function(t,i){(i=e.children[t.sortableIndex+(n?Number(i):0)])?e.insertBefore(t,i):e.appendChild(t)})))},dragOverCompleted(t){var n,e=t.sortable,i=t.isOwner,o=t.insertion,r=t.activeSortable,a=t.parentEl,s=t.putSortable
t=this.options,o&&(i&&r._hideClone(),dn=0,t.animation&&hn.length>1&&(vn||!i&&!r.options.sort&&!s)&&(n=g(un,0,1,1),hn.forEach((function(t){t!==un&&(D(t,n),a.appendChild(t))})),vn=1),i||(vn||W(),hn.length>1?(i=cn,r._showClone(e),r.options.animation&&!cn&&i&&fn.forEach((function(t){r.addAnimationState({target:t,rect:ln}),t.fromRect=ln,t.thisAnimationDuration=null}))):r._showClone(e)))},dragOverAnimationCapture(t){var n=t.dragRect,e=t.isOwner
t=t.activeSortable,hn.forEach((function(t){t.thisAnimationDuration=null})),t.options.animation&&!e&&t.multiDrag.isMultiDrag&&(ln=i({},n),n=v(un,1),ln.top-=n.f,ln.left-=n.e)},dragOverAnimationComplete(){vn&&(vn=0,W())},drop(t){var n=t.originalEvent,e=t.rootEl,i=t.parentEl,o=t.sortable,r=t.dispatchSortableEvent,a=t.oldIndex,s=t.putSortable,u=s||this.sortable
if(n){var l,c,h,d=this.options,v=i.children
if(!mn)if(d.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),f(un,d.selectedClass,!~hn.indexOf(un)),~hn.indexOf(un))hn.splice(hn.indexOf(un),1),an=null,_({sortable:o,rootEl:e,name:"deselect",targetEl:un,originalEvent:n})
else{if(hn.push(un),_({sortable:o,rootEl:e,name:"select",targetEl:un,originalEvent:n}),n.shiftKey&&an&&o.el.contains(an)){var m=E(an)
if(t=E(un),~m&&~t&&m!==t)for(var p,b=t>m?(p=m,t):(p=t,m+1);b>p;p++)~hn.indexOf(v[p])||(f(v[p],d.selectedClass,1),hn.push(v[p]),_({sortable:o,rootEl:e,name:"select",targetEl:v[p],originalEvent:n}))}else an=un
sn=u}mn&&this.isMultiDrag&&(vn=0,(i[Mt].options.sort||i!==e)&&hn.length>1&&(l=g(un),c=E(un,":not(."+this.options.selectedClass+")"),!dn&&d.animation&&(un.thisAnimationDuration=null),u.captureAnimationState(),dn||(d.animation&&(un.fromRect=l,hn.forEach((function(t){var n
t.thisAnimationDuration=null,t!==un&&(n=vn?g(t):l,t.fromRect=n,u.addAnimationState({target:t,rect:n}))}))),W(),hn.forEach((function(t){v[c]?i.insertBefore(t,v[c]):i.appendChild(t),c++})),a===E(un)&&(h=0,hn.forEach((function(t){t.sortableIndex!==E(t)&&(h=1)})),h&&r("update"))),hn.forEach((function(t){C(t)})),u.animateAll()),sn=u),(e===i||s&&"clone"!==s.lastPutMode)&&fn.forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)}))}},nullingGlobal(){this.isMultiDrag=mn=0,fn.length=0},destroyGlobal(){this._deselectMultiDrag(),l(document,"pointerup",this._deselectMultiDrag),l(document,"mouseup",this._deselectMultiDrag),l(document,"touchend",this._deselectMultiDrag),l(document,"keydown",this._checkKeyDown),l(document,"keyup",this._checkKeyUp)},_deselectMultiDrag(t){if(!(void 0!==mn&&mn||sn!==this.sortable||t&&h(t.target,this.options.draggable,this.sortable.el,0)||t&&0!==t.button))for(;hn.length;){var n=hn[0]
f(n,this.options.selectedClass,0),hn.shift(),_({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n,originalEvent:t})}},_checkKeyDown(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=1)},_checkKeyUp(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=0)}},i(t,{pluginName:"multiDrag",utils:{select(t){var n=t.parentNode[Mt]
n&&n.options.multiDrag&&!~hn.indexOf(t)&&(sn&&sn!==n&&(sn.multiDrag._deselectMultiDrag(),sn=n),f(t,n.options.selectedClass,1),hn.push(t))},deselect(t){var n=t.parentNode[Mt],e=hn.indexOf(t)
n&&n.options.multiDrag&&~e&&(f(t,n.options.selectedClass,0),hn.splice(e,1))}},eventProperties(){var t=this,n=[],e=[]
return hn.forEach((function(i){var o
n.push({multiDragElement:i,index:i.sortableIndex}),o=vn&&i!==un?-1:vn?E(i,":not(."+t.options.selectedClass+")"):E(i),e.push({multiDragElement:i,index:o})})),{items:r(hn),clones:[].concat(fn),oldIndicies:n,newIndicies:e}},optionListeners:{multiDragKey:t=>("ctrl"===(t=t.toLowerCase())?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t)}})}),z},"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).Sortable=n()
