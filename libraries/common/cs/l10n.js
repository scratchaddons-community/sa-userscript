import{escapeHTML as t}from"./autoescaper.js"
import{MessageFormatter as e,pluralTypeHandler as s}from"../../thirdparty/cs/icu-message-formatter.es.min.js"
export default class r extends EventTarget{constructor(){super(),this.messages={},this._reconfigure()}_reconfigure(){const t=this.locale
this._date=new Intl.DateTimeFormat(t),this._datetime=new Intl.DateTimeFormat(t,{timeStyle:"short",dateStyle:"short"}),this.formatter=new e(t,{plural:s})}_get(t,e,s,r){if(s=s||(t=>t),{}.hasOwnProperty.call(this.messages,t)){const r=this.messages[t],i=s(r.string||r)
return this.formatter.format(i,e)}return r||(globalThis.scratchAddons?.console||console).warn("Key missing:",t),r||t}get(t,e={},s=""){return this._get(t,e,null,s)}escaped(e,s={},r=""){return this._get(e,s,(e=>t(e)),r)}get locale(){return this.messages._locale||"en"}get localeName(){return this.messages._locale_name||"English"}date(t){return this._date.format(t)}datetime(t){return this._datetime.format(t)}}