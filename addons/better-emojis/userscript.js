export default async function({addon:t}){const a=["aww-cat","cat","cool-cat","fav-it-cat","gobo","huh-cat","lol-cat","love-it-cat","meow","pizza-cat","rainbow-cat","tongue-out-cat","upside-down-cat","waffle","wink-cat"],e="scratch-www"===t.tab.clientVersion?/^https?:\/\/scratch.mit.edu\/images\/emoji\/(.*).png$/:/^https:\/\/cdn.scratch.mit.edu\/scratchr2\/static\/(.*)\/images\/easter_eggs\/(.*).png$/
for(t.self.addEventListener("disabled",(()=>{const e=document.querySelectorAll("img.easter-egg, img.emoji")
for(const c of e)a.includes(c.dataset.saEmoji)&&(c.src="scratch-www"===t.tab.clientVersion?`https://scratch.mit.edu/images/emoji/${c.dataset.saEmoji}.png`:`https://cdn.scratch.mit.edu/scratchr2/static/images/easter_eggs/${c.dataset.saEmoji}.png`)})),t.self.addEventListener("reenabled",(()=>{const e=document.querySelectorAll("img.easter-egg[data-sa-emoji], img.emoji[data-sa-emoji]")
for(const c of e)a.includes(c.dataset.saEmoji)&&(c.src=t.self.dir+"/images/"+c.dataset.saEmoji+".svg")}));;){const c=await t.tab.waitForElement(".emoji, .easter-egg",{markAsSeen:1,reduxCondition(t){return location.pathname.startsWith("/messages")?"FETCHED"===t.messages?.status?.message:"FETCHED"===t.comments?.status?.comments}}),s=c.src.match(e)
if(null!==s){const e=s["scratch-www"===t.tab.clientVersion?1:2]
a.includes(e)&&(t.self.disabled||(c.src=t.self.dir+"/images/"+e+".svg"),c.dataset.saEmoji=e)}}}