export default async function({addon:t}){const o=Object.create(null)
for(t.self.addEventListener("disabled",(()=>{for(const t of Object.keys(o))document.getElementById(t).querySelector(".postleft dl").childNodes[6].textContent=o[t].original})),t.self.addEventListener("reenabled",(()=>{for(const t of Object.keys(o))document.getElementById(t).querySelector(".postleft dl").childNodes[6].textContent=`${o[t].new} posts`}));;){const e=await t.tab.waitForElement(".postleft dl",{markAsSeen:1})
if(e.childNodes[6]&&e.childNodes[6].nodeValue.includes("+")){const t=Number(/(\d+)\+? posts?/.exec(e.childNodes[6].nodeValue)[1])
fetch("https://scratchdb.lefty.one/v3/forum/user/info/"+e.querySelector("a").innerText).then((t=>t.json())).then((s=>{s.counts&&s.counts.total&&s.counts.total.count>t&&(o[e.closest(".blockpost").id]={original:e.childNodes[6].textContent,new:s.counts.total.count},e.childNodes[6].nodeValue=`${s.counts.total.count} posts`)}))}}}