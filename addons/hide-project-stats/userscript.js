export default async function({addon:t}){async function a(){let a=await t.auth.fetchUsername()
return await t.tab.waitForElement(".title"),null!==a&&document.querySelector(".title form")}async function e(){await t.tab.waitForElement(".project-favorites"),n(i),n(r),!t.self.disabled&&t.settings.get("showOwnStats")&&await a()?o().classList.add("sa-stat-display"):o().classList.remove("sa-stat-display")}async function n(e){e.buttonElement=document.querySelector(`.project-${e.name}s`),t.self.disabled||!t.settings.get(`${e.name}s`)||t.settings.get("showOwnStats")&&await a()?e.buttonElement.classList.remove("hidden"):null===await t.auth.fetchUsername()?e.buttonElement.classList.add("hidden"):e.buttonElement.classList.remove("hidden")}function o(){return document.querySelector(".flex-row.stats.noselect").parentElement}let i={name:"love"},r={name:"favorite"}
for(t.settings.addEventListener("change",(()=>{e()})),t.self.addEventListener("disabled",(()=>{e()})),t.self.addEventListener("reenabled",(()=>{e()})),t.tab.addEventListener("urlChange",(async()=>{e()})),t.tab.redux.addEventListener("statechanged",(t=>{"SET_LOVED"===t.detail.action.type&&n(i),"SET_FAVED"===t.detail.action.type&&n(r)}));;)await t.tab.waitForElement(".project-loves",{reduxCondition(t){return t.scratchGui.mode.isPlayerOnly}}),await t.tab.waitForElement(".project-favorites",{reduxCondition(t){return t.scratchGui.mode.isPlayerOnly}}),e(),await t.tab.waitForElement(".compose-row",{markAsSeen:1,reduxCondition(t){return t.scratchGui.mode.isPlayerOnly}})}