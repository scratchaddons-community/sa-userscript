export default async({addon:t,console:e,msg:n})=>{function o(e){e.addEventListener("click",(e=>{!t.self.disabled&&t.tab.redux.state.scratchGui.projectChanged&&document.querySelector('[class*="project-title-input_title-field_"]')&&!confirm(n("save-and-leave"))&&(e.preventDefault(),e.stopPropagation())}),{capture:1})}for(t.tab.redux.initialize(),t.tab.redux.addEventListener("statechanged",(({detail:n})=>{t.self.disabled||"timeout/SET_AUTOSAVE_TIMEOUT_ID"!==n.action.type||(clearTimeout(n.next.scratchGui.timeout.autoSaveTimeoutId),e.log("Pending autosave prevented."))})),t.self.enabledLate&&o(document.querySelector('[class*="community-button_community-button_"]'));;)o(await t.tab.waitForElement('[class*="community-button_community-button_"]',{markAsSeen:1,reduxEvents:["scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"],reduxCondition(t){return!t.scratchGui.mode.isPlayerOnly}}))}
