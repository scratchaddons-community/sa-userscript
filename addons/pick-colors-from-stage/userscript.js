export default async function({addon:c}){const e=Symbol(),t=c=>document.body.classList.toggle("sa-stage-color-picker-picking",c)
c.tab.redux.initialize(),c.tab.redux.addEventListener("statechanged",(r=>{const a=r.detail.action
a[e]||(c.self.disabled||"scratch-paint/eye-dropper/ACTIVATE_COLOR_PICKER"!==a.type||(t(1),c.tab.redux.dispatch({type:"scratch-gui/color-picker/ACTIVATE_COLOR_PICKER",callback(r){queueMicrotask((()=>{c.tab.redux.dispatch({...a,[e]:1}),a.callback(r),a.previousMode&&a.previousMode.activate(),c.tab.redux.dispatch({type:"scratch-paint/eye-dropper/DEACTIVATE_COLOR_PICKER",[e]:1}),t(0)}))}})),"scratch-paint/eye-dropper/DEACTIVATE_COLOR_PICKER"===a.type&&(t(0),c.tab.redux.state.scratchGui.colorPicker.active&&c.tab.redux.dispatch({type:"scratch-gui/color-picker/DEACTIVATE_COLOR_PICKER",[e]:1})))}))}