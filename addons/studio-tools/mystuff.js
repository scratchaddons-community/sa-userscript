export default async function({addon:e,msg:t}){for(;;){let a=await e.tab.waitForElement(".media-stats",{markAsSeen:1})
if("#galleries"===window.location.hash&&2===a.childElementCount){let i=a.appendChild(document.createElement("a"))
i.className="unshare",i.innerText=t("leave"),i.setAttribute("data-id",a.parentElement.querySelector(".title a").href.match(/[0-9]+/g)),i.addEventListener("click",(async function(){await e.tab.confirm(t("leave-new"),t("leave-confirm"))&&(await fetch(`https://scratch.mit.edu/site-api/users/curators-in/${i.getAttribute("data-id")}/remove/?usernames=${Scratch.INIT_DATA.LOGGED_IN_USER.model.username}`,{method:"PUT",headers:{"x-csrftoken":e.auth.csrfToken,"x-requested-with":"XMLHttpRequest"}}),window.location.reload())}))}}}