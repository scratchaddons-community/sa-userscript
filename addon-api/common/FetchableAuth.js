import t from"./Auth.js"
export default class s extends t{constructor(...t){super(...t),this._refresh()}_refresh(){this._lastUsername=void 0,this._lastUserId=void 0,this._lastIsLoggedIn=void 0,this._lastXToken=void 0}_getCookie(){throw new Error("Subclasses must implement this.")}_waitUntilFetched(){return new Promise((t=>this.addEventListener("session",t,{once:1})))}_update(t){this._lastUsername=t.user?.username||null,this._lastUserId=t.user?.id||null,this._lastIsLoggedIn=!!t.user,this._lastXToken=t.user?.token||null,this.dispatchEvent(new CustomEvent("session")),this.dispatchEvent(new CustomEvent("change"))}_fetchProperty(t){return void 0!==this[t]?Promise.resolve(this[t]):this._waitUntilFetched().then((()=>this[t]))}fetchIsLoggedIn(){return this._fetchProperty("_lastIsLoggedIn")}fetchUsername(){return this._fetchProperty("_lastUsername")}fetchUserId(){return this._fetchProperty("_lastUserId")}fetchXToken(){return this._fetchProperty("_lastXToken")}get csrfToken(){return this._getCookie("scratchcsrftoken")}get scratchLang(){return this._getCookie("scratchlanguage")}}