<!DOCTYPE html>
<html lang="en">
  <!--
    Restrictions with the loader:
    All modules must be a top-level child of `<head>`.
    Inline modules only: no relative paths are allowed.
  -->
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <base href="https://userscript.scratchaddons.cf/webpages/settings/scratch" />
    <link rel="icon" href="../../images/icon.png" />
    <style>
      html,
      body,
      iframe {
        width: 100%;
        height: 100%;
        padding: 0;
        margin: 0;
        border: none;
      }
    </style>
    <script type="module">
      const scripts = [
        [
          { src: "../set-lang.js", defer: true, async: true, type: "module" },
          { src: "../check-unsupported.js", defer: true, async: true, type: "module" },
          { src: "../../background/declare-scratchaddons-object.js", type: "module" },
        ],
        [
          { src: "./scratch.js", defer: true, type: "module" },
          { src: "../../background/load-manifests.js", type: "module" },
          { src: "../../background/get-addon-settings.js", defer: true, type: "module" },
        ],
      ];
      const elements = scripts[0].map((script) => Object.assign(document.createElement("script"), script));

      elements[elements.length - 1].addEventListener("load", () => {
        const elements2 = scripts[1].map((script) => Object.assign(document.createElement("script"), script));
        document.head.append(...elements2);
      });

      document.head.append(...elements);
    </script>
  </head>
  <body>
    <iframe src="./index.html"></iframe>
  </body>
</html>
